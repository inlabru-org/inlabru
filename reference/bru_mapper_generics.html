<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="A bru_mapper sub-class implementation must provide an
ibm_jacobian() method. If the model size 'n' and definition
values 'values' are stored in the object itself, default methods are
available (see Details). Otherwise the
ibm_n() and ibm_values() methods also need to be provided."><title>Generic methods for bru_mapper objects — bru_mapper_generics • inlabru</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Generic methods for bru_mapper objects — bru_mapper_generics"><meta property="og:description" content="A bru_mapper sub-class implementation must provide an
ibm_jacobian() method. If the model size 'n' and definition
values 'values' are stored in the object itself, default methods are
available (see Details). Otherwise the
ibm_n() and ibm_values() methods also need to be provided."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">inlabru</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.10.1.9010</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-general-examples">General examples</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-general-examples">
    <h6 class="dropdown-header" data-toc-skip>Basic examples</h6>
    <a class="dropdown-item" href="../articles/random_fields.html">Random field models in 1D</a>
    <a class="dropdown-item" href="../articles/random_fields_2d.html">Spatial random field models in 2D</a>
    <a class="dropdown-item" href="../articles/publications.html">Publications</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Concepts</h6>
    <a class="dropdown-item" href="../articles/component.html">Defining a model component</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Special models and techniques</h6>
    <a class="dropdown-item" href="../articles/svc.html">Spatially varying coefficient models</a>
    <a class="dropdown-item" href="../articles/zip_zap_models.html">ZIP and ZAP count models (zero-inflation)</a>
    <a class="dropdown-item" href="../articles/prediction_scores.html">Computing posterior prediction scores</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../articles/articles.html">Full articles list</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-point-processes">Point processes</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-point-processes">
    <h6 class="dropdown-header" data-toc-skip>Point process examples</h6>
    <a class="dropdown-item" href="../articles/1d_lgcp.html">LGCPs - An example in one dimension</a>
    <a class="dropdown-item" href="../articles/2d_lgcp.html">LGCPs - An example in two dimensions (sf version)</a>
    <a class="dropdown-item" href="../articles/2d_lgcp_sp.html">LGCPs - An example in two dimensions (sp version)</a>
    <a class="dropdown-item" href="../articles/2d_lgcp_covars.html">LGCPs - Spatial covariates</a>
    <a class="dropdown-item" href="../articles/2d_lgcp_distancesampling.html">LGCPs - Distance sampling</a>
    <a class="dropdown-item" href="../articles/2d_lgcp_plotsampling.html">LGCPs - Plot sampling</a>
    <a class="dropdown-item" href="../articles/2d_lgcp_multilikelihood.html">LGCPs - Multiple likelihoods</a>
    <a class="dropdown-item" href="../articles/2d_lgcp_spatiotemporal.html">LGCPs - An example in space and time</a>
    <a class="dropdown-item" href="../articles/2d_lgcp_residuals.html">LGCPs - Residuals</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-technical-articles">Technical articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-technical-articles">
    <h6 class="dropdown-header" data-toc-skip>Mapper techniques</h6>
    <a class="dropdown-item" href="../articles/bru_mapper.html">Customised model component with the bru_mapper system</a>
    <a class="dropdown-item" href="../articles/mesh_mapping.html">Converting inla.spde.make.A calls to the bru_mapper system</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Theory and technical documentation</h6>
    <a class="dropdown-item" href="../articles/Apptainer.html">Installation of INLA and inlabru with Apptainer on HPC</a>
    <a class="dropdown-item" href="../articles/method.html">The iterative linearised inlabru method</a>
    <a class="dropdown-item" href="../articles/linearapprox.html">A nonlinear model approximation example</a>
    <a class="dropdown-item" href="../articles/devel_flow.html">Code internal flow diagrams for model evaluation</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/inlabru-org/inlabru/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Generic methods for bru_mapper objects</h1>
      <small class="dont-index">Source: <a href="https://github.com/inlabru-org/inlabru/blob/HEAD/R/mappers.R" class="external-link"><code>R/mappers.R</code></a></small>
      <div class="d-none name"><code>bru_mapper_generics.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>A <code>bru_mapper</code> sub-class implementation must provide an
<code>ibm_jacobian()</code> method. If the model size 'n' and definition
values 'values' are stored in the object itself, default methods are
available (see Details). Otherwise the
<code>ibm_n()</code> and <code>ibm_values()</code> methods also need to be provided.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">ibm_n</span><span class="op">(</span><span class="va">mapper</span>, inla_f <span class="op">=</span> <span class="cn">FALSE</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">ibm_n_output</span><span class="op">(</span><span class="va">mapper</span>, <span class="va">input</span>, state <span class="op">=</span> <span class="cn">NULL</span>, inla_f <span class="op">=</span> <span class="cn">FALSE</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">ibm_values</span><span class="op">(</span><span class="va">mapper</span>, inla_f <span class="op">=</span> <span class="cn">FALSE</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">ibm_is_linear</span><span class="op">(</span><span class="va">mapper</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">ibm_jacobian</span><span class="op">(</span><span class="va">mapper</span>, <span class="va">input</span>, state <span class="op">=</span> <span class="cn">NULL</span>, inla_f <span class="op">=</span> <span class="cn">FALSE</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">ibm_linear</span><span class="op">(</span><span class="va">mapper</span>, <span class="va">input</span>, state <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">ibm_simplify</span><span class="op">(</span><span class="va">mapper</span>, input <span class="op">=</span> <span class="cn">NULL</span>, state <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">ibm_eval</span><span class="op">(</span><span class="va">mapper</span>, <span class="va">input</span>, state <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">ibm_eval2</span><span class="op">(</span><span class="va">mapper</span>, <span class="va">input</span>, state <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">ibm_names</span><span class="op">(</span><span class="va">mapper</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">ibm_names</span><span class="op">(</span><span class="va">mapper</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">value</span></span>
<span></span>
<span><span class="fu">ibm_inla_subset</span><span class="op">(</span><span class="va">mapper</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">ibm_invalid_output</span><span class="op">(</span><span class="va">mapper</span>, <span class="va">input</span>, <span class="va">state</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for default</span></span>
<span><span class="fu">ibm_n</span><span class="op">(</span><span class="va">mapper</span>, inla_f <span class="op">=</span> <span class="cn">FALSE</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for default</span></span>
<span><span class="fu">ibm_n_output</span><span class="op">(</span><span class="va">mapper</span>, <span class="va">input</span>, state <span class="op">=</span> <span class="cn">NULL</span>, inla_f <span class="op">=</span> <span class="cn">FALSE</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for default</span></span>
<span><span class="fu">ibm_values</span><span class="op">(</span><span class="va">mapper</span>, inla_f <span class="op">=</span> <span class="cn">FALSE</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for default</span></span>
<span><span class="fu">ibm_is_linear</span><span class="op">(</span><span class="va">mapper</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for default</span></span>
<span><span class="fu">ibm_jacobian</span><span class="op">(</span><span class="va">mapper</span>, <span class="va">input</span>, <span class="va">state</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for default</span></span>
<span><span class="fu">ibm_linear</span><span class="op">(</span><span class="va">mapper</span>, <span class="va">input</span>, <span class="va">state</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for default</span></span>
<span><span class="fu">ibm_simplify</span><span class="op">(</span><span class="va">mapper</span>, input <span class="op">=</span> <span class="cn">NULL</span>, state <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for default</span></span>
<span><span class="fu">ibm_eval</span><span class="op">(</span><span class="va">mapper</span>, <span class="va">input</span>, state <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">...</span>, jacobian <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for default</span></span>
<span><span class="fu">ibm_eval2</span><span class="op">(</span><span class="va">mapper</span>, <span class="va">input</span>, <span class="va">state</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for default</span></span>
<span><span class="fu">ibm_names</span><span class="op">(</span><span class="va">mapper</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for default</span></span>
<span><span class="fu">ibm_inla_subset</span><span class="op">(</span><span class="va">mapper</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for default</span></span>
<span><span class="fu">ibm_invalid_output</span><span class="op">(</span><span class="va">mapper</span>, <span class="va">input</span>, <span class="va">state</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>mapper</dt>
<dd><p>A mapper S3 object, inheriting from <code>bru_mapper</code>.</p></dd>


<dt>inla_f</dt>
<dd><p>logical; when <code>TRUE</code> for <code>ibm_n()</code> and <code>ibm_values()</code>, the
result must be compatible with the <code>INLA::f(...)</code> and corresponding
<code>INLA::inla.stack(...)</code> constructions.  For <code>ibm_{eval,jacobian,linear}</code>,
the <code>input</code> interpretation may be different.
Implementations do not normally need to do anything different, except
for mappers of the type needed for hidden multicomponent models such
as "bym2", which can be handled by <code>bru_mapper_collect</code>.</p></dd>


<dt>...</dt>
<dd><p>Arguments passed on to other methods</p></dd>


<dt>input</dt>
<dd><p>Data input for the mapper.</p></dd>


<dt>state</dt>
<dd><p>A vector of latent state values for the mapping,
of length <code>ibm_n(mapper, inla_f = FALSE)</code></p></dd>


<dt>value</dt>
<dd><p>a character vector of the same length as the number
of sub-mappers in the mapper</p></dd>


<dt>jacobian</dt>
<dd><p>For <code>ibm_eval()</code> methods, an optional pre-computed Jacobian, typically
supplied by internal methods that already have the Jacobian.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="functions">Functions<a class="anchor" aria-label="anchor" href="#functions"></a></h2>
    
<ul><li><p><code>ibm_n()</code>: Implementations must return the size of the latent vector
being mapped to.</p></li>
<li><p><code>ibm_n_output()</code>: Implementations must return an integer denoting the
mapper output length.
The default implementation returns <code>NROW(input)</code>.
Mappers such as <code>bru_mapper_multi</code> and <code>bru_mapper_collect</code>,
that can accept <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code> inputs require their own methods implementations.</p></li>
<li><p><code>ibm_values()</code>: When <code>inla_f=TRUE</code>, implementations must return a vector that
would be interpretable by an <code>INLA::f(..., values = ...)</code> specification.
The exception is the method for <code>bru_mapper_multi</code>, that returns a
multi-column data frame.</p></li>
<li><p><code>ibm_is_linear()</code>: Implementations must return <code>TRUE</code> or <code>FALSE</code>.
If <code>TRUE</code> (returned by the default method unless the mapper
contains an <code>is_linear</code> variable), users of the mapper
may assume the mapper is linear.</p></li>
<li><p><code>ibm_jacobian()</code>: Implementations must return a (sparse) matrix of size
<code>ibm_n_output(mapper, input, inla_f)</code>
by <code>ibm_n(mapper, inla_f = FALSE)</code>. The <code>inla_f=TRUE</code> argument should
only affect the allowed type of input format.</p></li>
<li><p><code>ibm_linear()</code>: Implementations must return a <a href="bru_mapper_taylor.html">bru_mapper_taylor</a> object
The linearisation information includes <code>offset</code>, <code>jacobian</code>, and <code>state0</code>.
The state information indicates for which state the <code>offset</code> was evaluated,
with <code>NULL</code> meaning all-zero.
The linearised mapper output is defined as
<code>effect(input, state) = offset(input, state0) + jacobian(input, state0) %*% (state - state0)</code>.
The default method calls <code>ibm_eval()</code> and <code>ibm_jacobian()</code> to generate
the needed information.</p></li>
<li><p><code>ibm_simplify()</code>: Implementations must return a <a href="bru_mapper.html">bru_mapper</a> object.
The default method returns <code>ibm_linear(...)</code> for linear mappers, and the
original <code>mapper</code> for non-linear mappers.</p></li>
<li><p><code>ibm_eval()</code>: Implementations must return a vector of length <code>ibm_n_output(...)</code>.
The <code>input</code> contents must
be in a format accepted by <code>ibm_jacobian(...)</code>
for the mapper.</p></li>
<li><p><code>ibm_eval2()</code>: Implementations must return a list with elements <code>offset</code> and <code>jacobian</code>.
The <code>input</code> contents must
be in a format accepted by <code>ibm_jacobian(...)</code>
for the mapper.</p></li>
<li><p><code>ibm_names()</code>: Implementations must return a character vector of sub-mapper names, or <code>NULL</code>.
Intended for providing information about multi-mappers and mapper collections.</p></li>
<li><p><code>ibm_names(mapper) &lt;- value</code>: Set mapper names.</p></li>
<li><p><code>ibm_inla_subset()</code>: Implementations must return a logical vector of <code>TRUE/FALSE</code> for
the subset such that, given the full A matrix and values output,
<code>A[, subset, drop = FALSE]</code> and <code>values[subset]</code>
(or <code>values[subset, , drop = FALSE]</code> for data.frame values) are equal
to the <code>inla_f = TRUE</code> version of A and values. The default method uses
the <code>ibm_values</code> output to construct the subset indexing.</p></li>
<li><p><code>ibm_invalid_output()</code>: Implementations should return a logical vector of length
<code>ibm_n_output(mapper, input, state, ...)</code> indicating which, if any,
output elements of <code>ibm_eval(mapper, input, state, ...)</code> are known to be
invalid.
For for multi/collect mappers, a list, when given a <code>multi=TRUE</code> argument.</p></li>
<li><p><code>ibm_n(default)</code>: Returns a non-null element 'n' from the
mapper object, and gives an error if it doesn't exist. If <code>inla_f=TRUE</code>,
first checks for a 'n_inla' element.</p></li>
<li><p><code>ibm_n_output(default)</code>: Returns <code>NROW(input)</code></p></li>
<li><p><code>ibm_values(default)</code>: Returns a non-null element
'values' from the mapper object, and <code>seq_len(ibm_n(mapper))</code> if
it doesn't exist.</p></li>
<li><p><code>ibm_is_linear(default)</code>: Returns logical
<code>is_linear</code> from the mapper object if it exists, and otherwise <code>TRUE</code>.</p></li>
<li><p><code>ibm_jacobian(default)</code>: Mapper classes must implement their own <code>ibm_jacobian</code> method.</p></li>
<li><p><code>ibm_linear(default)</code>: Calls <code>ibm_eval()</code> and <code>ibm_jacobian()</code>
and returns a <code>bru_mapper_taylor</code> object.
The <code>state0</code> information in the affine mapper indicates for which state
the <code>offset</code> was evaluated; The affine mapper output is defined as
<code>effect(input, state) = offset(input, state0) + jacobian(input, state0) %*% (state - state0)</code></p></li>
<li><p><code>ibm_simplify(default)</code>: Calls <code>ibm_linear()</code> for linear mappers, and returns the original mapper
for non-linear mappers.</p></li>
<li><p><code>ibm_eval(default)</code>: Verifies that the mapper is linear
with <code>ibm_is_linear()</code>, and then computes a linear mapping
as <code>ibm_jacobian(...) %*% state</code>.  When <code>state</code> is <code>NULL</code>,
a zero vector of length <code>ibm_n_output(...)</code> is returned.</p></li>
<li><p><code>ibm_eval2(default)</code>: Calls <code>jacobian &lt;- ibm_jacobian(...)</code> and
<code>offset &lt;- ibm_eval(..., jacobian = jacobian)</code>
and returns a list with elements <code>offset</code> and <code>jacobian</code>, as needed
by <code>ibm_linear.default()</code> and similar methods. Mapper classes can implement
their own <code>ibm_eval2</code> method if joint construction of evaluation and Jacobian
is more efficient than separate or sequential construction.</p></li>
<li><p><code>ibm_names(default)</code>: Returns <code>NULL</code></p></li>
<li><p><code>ibm_inla_subset(default)</code>: Uses
the <code>ibm_values</code> output to construct the inla subset indexing, passing
extra arguments such as <code>multi</code> on to the methods (this means it supports
both regular vector values and <code>multi=1</code> data.frame values).</p></li>
<li><p><code>ibm_invalid_output(default)</code>: Returns an all-<code>FALSE</code> logical vector.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><a href="bru_mapper.html">bru_mapper</a> for constructor methods, and
<a href="bru_get_mapper.html">bru_get_mapper</a> for hooks to extract mappers from latent model object
class objects.</p>
<p><a href="bru_mapper.html">bru_mapper</a>, <code><a href="bru_get_mapper.html">bru_get_mapper()</a></code></p>
<p>Other mappers: 
<code><a href="bru_get_mapper.html">bru_get_mapper</a>()</code>,
<code><a href="bru_mapper.html">bru_mapper</a>()</code>,
<code><a href="bru_mapper_fm_mesh_1d.html">bru_mapper.fm_mesh_1d</a>()</code>,
<code><a href="bru_mapper_fm_mesh_2d.html">bru_mapper.fm_mesh_2d</a>()</code>,
<code><a href="bru_mapper_aggregate.html">bru_mapper_aggregate</a>()</code>,
<code><a href="bru_mapper_collect.html">bru_mapper_collect</a>()</code>,
<code><a href="bru_mapper_const.html">bru_mapper_const</a>()</code>,
<code><a href="bru_mapper_factor.html">bru_mapper_factor</a>()</code>,
<code><a href="bru_mapper_harmonics.html">bru_mapper_harmonics</a>()</code>,
<code><a href="bru_mapper_index.html">bru_mapper_index</a>()</code>,
<code><a href="bru_mapper_linear.html">bru_mapper_linear</a>()</code>,
<code><a href="bru_mapper_logsumexp.html">bru_mapper_logsumexp</a>()</code>,
<code><a href="bru_mapper_marginal.html">bru_mapper_marginal</a>()</code>,
<code><a href="bru_mapper_matrix.html">bru_mapper_matrix</a>()</code>,
<code><a href="bru_mapper_mesh_B.html">bru_mapper_mesh_B</a>()</code>,
<code><a href="bru_mapper_multi.html">bru_mapper_multi</a>()</code>,
<code><a href="bru_mapper_pipe.html">bru_mapper_pipe</a>()</code>,
<code><a href="bru_mapper_scale.html">bru_mapper_scale</a>()</code>,
<code><a href="bru_mapper_shift.html">bru_mapper_shift</a>()</code>,
<code><a href="bru_mapper_taylor.html">bru_mapper_taylor</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># ibm_names</span></span></span>
<span class="r-in"><span><span class="va">mapper</span> <span class="op">&lt;-</span> <span class="fu"><a href="bru_mapper_multi.html">bru_mapper_multi</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  A <span class="op">=</span> <span class="fu"><a href="bru_mapper_index.html">bru_mapper_index</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  B <span class="op">=</span> <span class="fu"><a href="bru_mapper_index.html">bru_mapper_index</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">ibm_names</span><span class="op">(</span><span class="va">mapper</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "A" "B"</span>
<span class="r-in"><span><span class="fu">ibm_names</span><span class="op">(</span><span class="va">mapper</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"new"</span>, <span class="st">"names"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">ibm_names</span><span class="op">(</span><span class="va">mapper</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "new"   "names"</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Finn Lindgren, Fabian E. Bachl.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer></div>

  

  

  </body></html>

