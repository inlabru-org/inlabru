<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Changelog • inlabru</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Changelog"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">inlabru</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.11.1.9010</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-general-examples" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">General examples</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-general-examples"><li><h6 class="dropdown-header" data-toc-skip>Basic examples</h6></li>
    <li><a class="dropdown-item" href="../articles/random_fields.html">Random field models in 1D</a></li>
    <li><a class="dropdown-item" href="../articles/random_fields_2d.html">Spatial random field models in 2D</a></li>
    <li><a class="dropdown-item" href="../articles/publications.html">Publications</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Concepts</h6></li>
    <li><a class="dropdown-item" href="../articles/component.html">Defining a model component</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Special models and techniques</h6></li>
    <li><a class="dropdown-item" href="../articles/svc.html">Spatially varying coefficient models</a></li>
    <li><a class="dropdown-item" href="../articles/zip_zap_models.html">ZIP and ZAP count models (zero-inflation)</a></li>
    <li><a class="dropdown-item" href="../articles/prediction_scores.html">Computing posterior prediction scores</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/articles.html">Full articles list</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-point-processes" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Point processes</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-point-processes"><li><h6 class="dropdown-header" data-toc-skip>Point process examples</h6></li>
    <li><a class="dropdown-item" href="../articles/1d_lgcp.html">LGCPs - An example in one dimension</a></li>
    <li><a class="dropdown-item" href="../articles/2d_lgcp.html">LGCPs - An example in two dimensions (sf version)</a></li>
    <li><a class="dropdown-item" href="../articles/2d_lgcp_sp.html">LGCPs - An example in two dimensions (sp version)</a></li>
    <li><a class="dropdown-item" href="../articles/2d_lgcp_covars.html">LGCPs - Spatial covariates</a></li>
    <li><a class="dropdown-item" href="../articles/2d_lgcp_distancesampling.html">LGCPs - Distance sampling</a></li>
    <li><a class="dropdown-item" href="../articles/2d_lgcp_plotsampling.html">LGCPs - Plot sampling</a></li>
    <li><a class="dropdown-item" href="../articles/2d_lgcp_multilikelihood.html">LGCPs - Multiple likelihoods</a></li>
    <li><a class="dropdown-item" href="../articles/2d_lgcp_spatiotemporal.html">LGCPs - An example in space and time</a></li>
    <li><a class="dropdown-item" href="../articles/2d_lgcp_residuals.html">LGCPs - Residuals</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-technical-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Technical articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-technical-articles"><li><h6 class="dropdown-header" data-toc-skip>Mapper techniques</h6></li>
    <li><a class="dropdown-item" href="../articles/bru_mapper.html">Customised model component with the bru_mapper system</a></li>
    <li><a class="dropdown-item" href="../articles/mesh_mapping.html">Converting inla.spde.make.A calls to the bru_mapper system</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Theory and technical documentation</h6></li>
    <li><a class="dropdown-item" href="../articles/Apptainer.html">Installation of INLA and inlabru with Apptainer on HPC</a></li>
    <li><a class="dropdown-item" href="../articles/method.html">The iterative linearised inlabru method</a></li>
    <li><a class="dropdown-item" href="../articles/linearapprox.html">A nonlinear model approximation example</a></li>
    <li><a class="dropdown-item" href="../articles/devel_flow.html">Code internal flow diagrams for model evaluation</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/inlabru-org/inlabru/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-news">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Changelog</h1>
      <small>Source: <a href="https://github.com/inlabru-org/inlabru/blob/devel/NEWS.md" class="external-link"><code>NEWS.md</code></a></small>
    </div>

    <div class="section level2">
<h2 class="pkg-version" data-toc-text="development version" id="inlabru-development-version">inlabru (development version)<a class="anchor" aria-label="anchor" href="#inlabru-development-version"></a></h2>
<div class="section level3">
<h3 id="general-changes-development-version">General changes<a class="anchor" aria-label="anchor" href="#general-changes-development-version"></a></h3>
<ul><li>Remove unneeded <code>"list"</code> class inheritance from solitary classes (version <code>2.11.1.9001</code>)</li>
<li>Expand the <code>summary</code> and <code>print</code> method class coverage (version <code>2.11.1.9002</code>)</li>
<li>Remove <code>ggmap</code> support (version <code>2.11.1.9002</code>)</li>
<li>Move <code>sp</code> from <code>Imports</code> to <code>Suggests</code>. Component definitions using <code>coordinates</code> as input require either <code><a href="https://edzer.github.io/sp/reference/coordinates.html" class="external-link">sp::coordinates</a></code> or <code>sp</code> having been already loaded with e.g. <code><a href="https://github.com/edzer/sp/" class="external-link">library(sp)</a></code> (version <code>2.11.1.9003</code>)</li>
<li>Use <code>bru_safe_inla(multicore=TRUE)</code> in <code><a href="../reference/bru.html">bru()</a></code> to allow multicore in non-interactive mode. Fixes regression bug that disabled multicore for non-interactive sessions. (version <code>2.11.1.9004</code>)</li>
<li>Reduced the amount of diagnostic messages in <code><a href="../reference/bru_safe_inla.html">bru_safe_inla()</a></code> (version <code>2.11.1.9005</code>)</li>
<li>Add <code>sf</code> output format support for <code>sline</code> and <code>spoly</code> (version <code>2.11.1.9006</code>)</li>
<li>Remove unnecessary <code>INLA</code> namespace loading in <code>ggplot</code> methods (version <code>2.11.1.9008</code>)</li>
</ul></div>
<div class="section level3">
<h3 id="data-set-updates-development-version">Data set updates<a class="anchor" aria-label="anchor" href="#data-set-updates-development-version"></a></h3>
<ul><li>Convert <code>mrsea</code> to <code>sf</code> format (version <code>2.11.1.9009</code>)</li>
<li>Convert the <code>shrimp</code> data set to <code>sf</code> format (version <code>2.11.1.9007</code>)</li>
<li>Remove <code>seals_sp</code> data set due to excessive size (version <code>2.11.1.9010</code>)</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.11.1" id="inlabru-2111">inlabru 2.11.1<a class="anchor" aria-label="anchor" href="#inlabru-2111"></a></h2><p class="text-muted">CRAN release: 2024-07-01</p>
<div class="section level3">
<h3 id="bug-fixes-2-11-1">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-2-11-1"></a></h3>
<ul><li>Fix documentation link issues not spotted by local and github package checks</li>
<li>Work around invalid geometry in map data used by the Spatially Varying Coefficients vignette</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.11.0" id="inlabru-2110">inlabru 2.11.0<a class="anchor" aria-label="anchor" href="#inlabru-2110"></a></h2>
<div class="section level3">
<h3 id="new-features-2-11-0">New features<a class="anchor" aria-label="anchor" href="#new-features-2-11-0"></a></h3>
<ul><li>Add support for the <code>scale</code> parameter to <code><a href="../reference/bru_like.html">like()</a></code>.</li>
<li>Add support for special response objects like <code><a href="https://rdrr.io/pkg/INLA/man/mdata.html" class="external-link">inla.mdata()</a></code> and <code><a href="https://rdrr.io/pkg/INLA/man/surv.html" class="external-link">inla.surv()</a></code>, when INLA version <code>&gt; 24.06.02</code> (for <code>mdata</code>) or <code>&gt; 24.06.26</code> (for <code>surv</code>) are available (version <code>2.10.1.9011</code>)</li>
<li>New <code>toypoints</code> example data set, for basic modelling examples (version <code>2.10.1.9003</code>)</li>
</ul></div>
<div class="section level3">
<h3 id="feature-updates-2-11-0">Feature updates<a class="anchor" aria-label="anchor" href="#feature-updates-2-11-0"></a></h3>
<ul><li>Updated convergence plots, reducing random effect aspects to summary statistics, improving speed and visual coherence (version <code>2.10.1.9004</code>)</li>
<li>Add options to <code><a href="../reference/bru_convergence_plot.html">bru_convergence_plot()</a></code> to control the number of iterations shown, and optionally show the initial values that are stored from this version (version <code>2.10.1.9005</code>)</li>
<li>Switch timing mechanism from <code><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time()</a></code> to <code><a href="https://rdrr.io/r/base/proc.time.html" class="external-link">proc.time()</a></code> to capture CPU time instead of elapsed clock time. Added <code><a href="../reference/bru_timings.html">bru_timings()</a></code> method to extract the timings safely from a fitted <code>bru</code> object (version <code>2.10.1.9007</code> and <code>2.10.1.9010</code>)</li>
<li>Add verbosity level information to the bru log data structure, allowing filtered log extraction and more flexible log display (version <code>2.10.1.9012</code>)</li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-2-11-0">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-2-11-0"></a></h3>
<ul><li>Fix regression bug in <code>"bym"</code> model support, where the latent state size wasn’t correctly handled by the mapper system (version <code>2.10.1.9002</code>)</li>
<li>Add filter to limit mapper construction to only the components used in the predictor expression, to avoid unused components breaking the initialisation. This allows easier testing of multi-likelihood models (version <code>2.10.1.9006</code>)</li>
<li>Improved backwards compatibility support for <code>sp</code> data input for <code>family = "cp"</code> (version <code>2.10.1.9008</code>)</li>
</ul></div>
<div class="section level3">
<h3 id="deprecated-methods-2-11-0">Deprecated methods<a class="anchor" aria-label="anchor" href="#deprecated-methods-2-11-0"></a></h3>
<ul><li>Deprecated (since 2.9.0) method <code>ipoints(samplers, domain)</code> is no longer available. Use <code>fmesher::fm_int(domain, samplers)</code> instead.</li>
<li>The <code>allow_latent</code>, <code>include_latent</code> arguments to <code><a href="../reference/bru_like.html">like()</a></code> have been deprecated in favour of the general <code><a href="../reference/bru_used.html">bru_used()</a></code> framework, that auto-detects what component effects and latent effects are used by a predictor expression.</li>
<li>The deprecated (since 2.8.0) <code><a href="../reference/inlabru-deprecated.html">cprod()</a></code> method now gives a warning and will be removed in a future version. Use <code><a href="https://inlabru-org.github.io/fmesher/reference/fm_cprod.html" class="external-link">fmesher::fm_cprod()</a></code> instead.</li>
<li>The <code>integration_weight_aggregation</code> method has been removed (deprecated since 2.8.0). Use <code><a href="https://inlabru-org.github.io/fmesher/reference/fm_vertex_projection.html" class="external-link">fmesher::fm_vertex_projection()</a></code> instead.</li>
<li>The <code>mesh_triangle_integration</code> method has been removed (deprecated since 2.8.0). Use <code><a href="https://inlabru-org.github.io/fmesher/reference/fm_int.html" class="external-link">fmesher::fm_int()</a></code> instead.</li>
<li>Old use of <code><a href="../reference/inlabru-deprecated.html">bru_mapper.default()</a></code> to define new mapper classes has been disabled (deprecated since 2.7.0). Use <code><a href="../reference/bru_mapper.html">bru_mapper_define()</a></code> instead.</li>
<li>Deprecated (since 2.8.0) methods <code><a href="../reference/inlabru-deprecated.html">is.inside()</a></code>, <code><a href="../reference/inlabru-deprecated.html">vertices.inla.mesh()</a></code>, and <code><a href="../reference/inlabru-deprecated.html">pixels()</a></code> have been disabled. Use <code><a href="https://inlabru-org.github.io/fmesher/reference/fm_is_within.html" class="external-link">fmesher::fm_is_within()</a></code>, <code><a href="https://inlabru-org.github.io/fmesher/reference/fm_vertices.html" class="external-link">fmesher::fm_vertices()</a></code>, and <code><a href="https://inlabru-org.github.io/fmesher/reference/fm_pixels.html" class="external-link">fmesher::fm_pixels()</a></code> instead.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.10.1" id="inlabru-2101">inlabru 2.10.1<a class="anchor" aria-label="anchor" href="#inlabru-2101"></a></h2><p class="text-muted">CRAN release: 2023-12-21</p>
<div class="section level3">
<h3 id="feature-updates-2-10-1">Feature updates<a class="anchor" aria-label="anchor" href="#feature-updates-2-10-1"></a></h3>
<ul><li>Add new web article on ZIP/ZAP models (zero inflated Poisson models) where the non-zero probability is modelled with a separate predictor from the predictor for the Poisson model parameter: <a href="https://inlabru-org.github.io/inlabru/articles/zip_zap_models.html" class="uri">https://inlabru-org.github.io/inlabru/articles/zip_zap_models.html</a>. (Thanks to Dmytro Perepolkin)</li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-and-dependency-simplification-2-10-1">Bug fixes and dependency simplification<a class="anchor" aria-label="anchor" href="#bug-fixes-and-dependency-simplification-2-10-1"></a></h3>
<ul><li>Remove dependence on the <code>ggpolypath</code> package, and the <code>ggplot2::fortify.SpatialPolygons/DataFrame()</code> methods that were deprecated in <code>ggplot2</code> version <code>3.4.4</code>. Code using <code><a href="../reference/gg.SpatialPolygons.html">gg.SpatialPolygons()</a></code> together with <code><a href="https://ggplot2.tidyverse.org/reference/coord_fixed.html" class="external-link">coord_fixed()</a></code>/<code><a href="https://ggplot2.tidyverse.org/reference/coord_fixed.html" class="external-link">coord_equal()</a></code> for coordinate axis control needs to use <code><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">coord_sf()</a></code> instead.</li>
<li>Detect the need for vectorised parameters in <code>bru_forward_transformation</code> to allow <code>bru_mapper_marginal</code> to be applied with e.g. spatially varying parameters. (version <code>2.10.0.9001</code>)</li>
<li>Detect <code>terra</code> version <code>&gt;= 1.7-66</code> that removes the need for detecting special cases (<code>nrow(where) == 1</code> and <code>terra::nlyr(data) == 1</code>). Workaround code used for versions <code>&lt; 1.7-66</code>. (version <code>2.10.0.9002</code>) (Thanks to Robert J. Hijmans)</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.10.0" id="inlabru-2100">inlabru 2.10.0<a class="anchor" aria-label="anchor" href="#inlabru-2100"></a></h2><p class="text-muted">CRAN release: 2023-10-29</p>
<div class="section level3">
<h3 id="feature-updates-2-10-0">Feature updates<a class="anchor" aria-label="anchor" href="#feature-updates-2-10-0"></a></h3>
<ul><li>Add new <code><a href="../reference/bru_mapper_generics.html">ibm_simplify()</a></code> generic to handle mapper simplification more generally; needed to properly support non-linear component mappers. (version <code>2.9.0.9004</code>)</li>
<li>Add new <code><a href="../reference/bru_mapper_marginal.html">bru_mapper_marginal()</a></code> mapper class that can be used as part of component mapper pipelines. (version <code>2.9.0.9004</code>)</li>
<li>Add new <code><a href="../reference/bru_mapper_generics.html">ibm_eval2()</a></code> generic that computes both evaluation and Jacobian, avoiding double-computing of the Jacobian, when practical. (version <code>2.9.0.9005</code>)</li>
<li>Add new <code><a href="../reference/bru_timings_plot.html">bru_timings_plot()</a></code> function that plots the time used for each nonlinear iteration (version <code>2.9.0.9007</code>)</li>
<li>Speed up <code><a href="../reference/bru_fill_missing.html">bru_fill_missing()</a></code> (by orders of magnitude) by changing method for finding the nearest available data point. (version <code>2.9.0.9011</code>)</li>
<li>Add new <code><a href="../reference/bru_mapper_shift.html">bru_mapper_shift()</a></code> mapper class that works like <code><a href="../reference/bru_mapper_scale.html">bru_mapper_scale()</a></code> but for additive shifts instead of multiplicative scaling. (version <code>2.9.0.9012</code>)</li>
<li>Added more checks for invalid component or predictor evaluations, to help catch user errors sooner, and with more informative messages. (version <code>2.9.0.9013</code>)</li>
<li>Expand <code>bru_mapper_matrix</code>, previously used only for component <code>model = "fixed"</code>, to allow integer indexing in addition to the previous factor/character-only indexing. (version <code>2.9.0.9014</code>)</li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-2-10-0">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-2-10-0"></a></h3>
<ul><li>The <code>is_linear</code> flag wasn’t correctly set for <code>bru_mapper_logsumexp</code> mappers. Since previous versions did not accept non-linear component mappers, this is unlikely to have affected any user code. (Fixed in version <code>2.9.0.9001</code>)</li>
<li>Improved error messages for missing or incomplete LGCP domain specification. (version <code>2.9.0.9002</code> and <code>2.9.0.9006</code>)</li>
<li>Allow <code>NULL</code> in automatic component usage detection. (version <code>2.9.0.9003</code>)</li>
<li>Corrected the crs information for <code>gorillas$plotsample$counts</code> and <code>gorillas_sf$plotsample$counts</code> from <code>+units=m</code> to <code>+units=km</code>. (version <code>2.9.0.9010</code>) The geometry information in <code>counts</code> is unlikely to have been used in examples or analysis code, as the problem would have been immediately obvious; plotting or other geometric operations that use the crs information would heve been completely wrong, and is only detected now that more code uses the crs information at all. Thanks to Dmytro Perepolkin for reporting in issue <a href="https://github.com/inlabru-org/inlabru/issues/205" class="external-link">#205</a></li>
<li>Fix problem in <code><a href="../reference/bru_fill_missing.html">bru_fill_missing()</a></code> for cases where the input data object also has missing values. (version <code>2.9.0.9011</code>)</li>
<li>Make <code><a href="../reference/eval_spatial.html">eval_spatial()</a></code> transform the <code>where</code> coordinates to the same crs as the input data, for <code>SpatRaster</code> and <code>sf</code> inputs, to allow different crs specifications. (version <code>2.9.0.9012</code>)</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.9.0" id="inlabru-290">inlabru 2.9.0<a class="anchor" aria-label="anchor" href="#inlabru-290"></a></h2><p class="text-muted">CRAN release: 2023-08-28</p>
<div class="section level3">
<h3 id="feature-updates-2-9-0">Feature updates<a class="anchor" aria-label="anchor" href="#feature-updates-2-9-0"></a></h3>
<ul><li><p>Conversion of code to use <code>fmesher</code> for mesh and geometry handling; the interface supports existing objects and methods. See <a href="https://inlabru-org.github.io/fmesher/articles/inla_conversion.html" class="external-link uri">https://inlabru-org.github.io/fmesher/articles/inla_conversion.html</a> for more information.</p></li>
<li><p>General speed improvements, see below for details.</p></li>
<li><p>Added <code><a href="../reference/gg.sf.html">gg.sf()</a></code> method.</p></li>
<li><p>Add experimental support for <code>stars</code> via <code><a href="../reference/eval_spatial.html">eval_spatial()</a></code>. (version <code>2.8.0.9007</code>)</p></li>
<li><p>Move the <code>sp</code> package from ‘Depends’ to ‘Imports’. This means that user code should either use <code>sp::</code> or <code><a href="https://github.com/edzer/sp/" class="external-link">library("sp")</a></code> to access <code>sp</code> methods. The <code><a href="../reference/bru_safe_sp.html">bru_safe_sp()</a></code> helper function can be used to check for a safe <code>sp</code> package configuration during the transition from <code>rgdal</code> to <code>sf</code>, and is only needed if you may run on systems with <code>sp</code> installations older than “2.0-0” or with <code>sp::get_evolution_status() &lt; 2</code>. (version <code>2.8.2011</code>)</p></li>
<li>
<p>Now preserves the previous log output when using <code><a href="../reference/bru.html">bru_rerun()</a></code>, and <code><a href="../reference/bru_log.html">bru_log()</a></code> is now a set of S3 methods, supporting extracting the full inlabru log as well <code>bru</code>-object specific logs (version <code>2.8.0.9008</code>).</p>
<p>Note: From version <code>2.9.0</code>, use <code><a href="../reference/bru_log.html">bru_log()</a></code> to access the global log, and <code>bru_log(fit)</code> to access a stored estimation log.</p>
<p>Up to version <code>2.8.0</code>, <code><a href="../reference/bru_log.html">bru_log()</a></code> was a deprecated alias for <code><a href="../reference/bru_log_message.html">bru_log_message()</a></code>. When running on <code>2.8.0</code> or earlier, use <code>bru_log_get()</code> to access the global log, and <code>cat(fit$bru_iinla$log, sep = "\n")</code> to print a stored estimation object log.</p>
</li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-and-speed-improvements-2-9-0">Bug fixes and speed improvements<a class="anchor" aria-label="anchor" href="#bug-fixes-and-speed-improvements-2-9-0"></a></h3>
<ul><li>Covariate object component inputs of type <code>SpatialPolygonsDataFrame</code> were not automatically passed on to <code><a href="../reference/eval_spatial.html">eval_spatial()</a></code>. The logic has now changed so that any object with a <code><a href="../reference/eval_spatial.html">eval_spatial()</a></code> method will trigger a call to <code><a href="../reference/eval_spatial.html">eval_spatial()</a></code>. See <code><a href="../reference/input_eval.html">?input_eval</a></code> for further information. (version <code>2.8.0.9001</code>)</li>
<li>
<code><a href="https://inlabru-org.github.io/fmesher/reference/fm_crs_is_null.html" class="external-link">fm_crs_is_null()</a></code>, <code><a href="https://inlabru-org.github.io/fmesher/reference/fm_transform.html" class="external-link">fm_transform()</a></code> now supports oblique <code>fm_crs</code> CRS objects, and <code><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na()</a></code> methods for the <code>fm_crs</code> and <code>inla.CRS</code> classes have been added. (version <code>2.8.0.9003</code>)</li>
<li>Significant speed up <code><a href="https://rspatial.github.io/terra/reference/predict.html" class="external-link">predict()</a></code> by using <code>quantile(..., names = FALSE)</code>. (version <code>2.8.0.9004</code>)</li>
<li>Improved <code><a href="../reference/row_kron.html">row_kron()</a></code> code, causing speedups of a factor 2-30 in randomised test cases. (version <code>2.8.0.9005</code>)</li>
<li>Removed incorrect code for <code>sf</code> method for <code><a href="../reference/eval_spatial.html">eval_spatial()</a></code>, causing failure when extracting from multiple layers in a single call. (version <code>2.8.0.9007</code>)</li>
<li>Improved handling of posterior sample variable extraction in <code><a href="../reference/generate.html">generate()</a></code> and <code><a href="https://rspatial.github.io/terra/reference/predict.html" class="external-link">predict()</a></code>. Now much faster for large models. (version <code>2.8.0.9009</code>)</li>
<li>Fixed linearisation issue when using only the <code>*_latent</code> form of a component. (version <code>2.8.0.9015</code>)</li>
<li>Workaround for equivalent but textually different CRS/WKT information in <code><a href="../reference/bru_fill_missing.html">bru_fill_missing()</a></code>. (version <code>2.8.0.9016</code>, fixes <a href="https://github.com/inlabru-org/inlabru/issues/200" class="external-link">#200</a>)</li>
</ul></div>
<div class="section level3">
<h3 id="deprecation-of-old-functions-2-9-0">Deprecation of old functions<a class="anchor" aria-label="anchor" href="#deprecation-of-old-functions-2-9-0"></a></h3>
<ul><li>
<code>eval_SpatialDF</code> removed, deprecated since <code>2.8.0</code>. See <code>eval_spatial</code> instead.</li>
<li>
<code>stransform</code>, <code>ibm_amatrix</code>, <code>ibm_valid_input</code> removed, deprecated since <code>2.7.0</code>. See <code>fm_transform</code> and <code>ibm_jacobian</code> instead.</li>
<li>
<code>bru_mapper_offset</code>, deprecated since <code>2.6.0</code> now returns a pure <code>bru_mapper_const</code> object, and all <code>bru_mapper_offset</code> <code>ibm_*</code> methods have been removed.</li>
<li>
<code>init.tutorial</code> removed, deprecated since <code>2.5.0</code>
</li>
<li>
<code>generate.inla</code> and <code>predict.inla</code> removed, deprecated since <code>2.1.0</code>
</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.8.0" id="inlabru-280">inlabru 2.8.0<a class="anchor" aria-label="anchor" href="#inlabru-280"></a></h2><p class="text-muted">CRAN release: 2023-06-20</p>
<div class="section level3">
<h3 id="feature-updates-2-8-0">Feature updates<a class="anchor" aria-label="anchor" href="#feature-updates-2-8-0"></a></h3>
<ul><li><p>The iterative inla method has been given both sharper internal <code><a href="https://rdrr.io/pkg/INLA/man/inla.html" class="external-link">inla()</a></code> optimisation criteria for the iterations (thanks to Haavard Rue), <em>and</em> a more relaxed nonlinear iteration stopping criterion; the default <code>bru_method$rel_tol</code> values has been changed from 1 to 10 percent change. The iterations are terminated when all latent and hyper-parameter mode changes fullfil <code>|change|/SD &lt; rel_tol</code>, and the non-linear line search is inactive. This seems to strike a useful balance between the different optimisation criteria, allowing the iterations to converge faster and also detect that convergence sooner.</p></li>
<li>
<p>The logic for which components are needed for a predictor expression (in <code><a href="../reference/bru_like.html">like()</a></code> or <code><a href="../reference/generate.html">generate()</a></code>/<code><a href="https://rspatial.github.io/terra/reference/predict.html" class="external-link">predict()</a></code>) has been updated to when possible extract the list of components from the expression itself. The user can override this default if necessary, using the <code>include</code>/<code>exclude</code> arguments.</p>
<p>The <code><a href="../reference/bru_used.html">bru_used()</a></code> methods are used to guess the needed component names, applied to the right-hand side of the <code>formula</code> arguments. The <code>allow_latent</code> argument to <code><a href="../reference/bru_like.html">like()</a></code> has been deprecated in favour of <code>include_latent</code> (by default auto-detected for use of <code>_latent</code> and <code>_eval</code>).</p>
<p>The internal information storage is handled by the new <code><a href="../reference/bru_used.html">bru_used()</a></code> methods, that can also be used directly by the user and supplied via the <code>used</code> argument to <code><a href="../reference/bru_like.html">like()</a></code>/<code><a href="../reference/generate.html">generate()</a></code>/<code><a href="https://rspatial.github.io/terra/reference/predict.html" class="external-link">predict()</a></code>.</p>
</li>
<li><p>Add <code><a href="https://inlabru-org.github.io/fmesher/reference/fm_int.html" class="external-link">fm_int()</a></code> integration methods, replacing the old <code>ipmaker()</code> and <code><a href="../reference/inlabru-deprecated.html">ipoints()</a></code> methods. Supports both <code>sf</code> and <code>sp</code> sampler objects.</p></li>
<li><p>Add <code><a href="https://inlabru-org.github.io/fmesher/reference/fm_pixels.html" class="external-link">fm_pixels()</a></code> methods for gridded points. The old <code><a href="../reference/inlabru-deprecated.html">pixels()</a></code> method now calls <code>fm_pixels(..., format = "sp")</code></p></li>
<li><p><code>eval_spatial</code> support for sf objects (for point-in-polygon data lookups)</p></li>
<li><p>Allow precomputed spatial covariates in the data for point process observations</p></li>
<li><p>Add <code>edge|int|ext.linewidth</code> arguments to <code>gg.inla.mesh</code> <a href="https://github.com/inlabru-org/inlabru/issues/188" class="external-link">#188</a></p></li>
<li><p>Rename the <code><a href="https://rspatial.github.io/terra/reference/predict.html" class="external-link">predict()</a></code> and <code><a href="../reference/generate.html">generate()</a></code> <code>data</code> arguments to <code>newdata</code>, for better compatibility with other <code><a href="https://rspatial.github.io/terra/reference/predict.html" class="external-link">predict()</a></code> methods. The old argument name will still be accepted, but give a warning. Code that does not name the <code>data</code> argument is not affected.</p></li>
<li>
<p>Note: Coordinate names for <code>Spatial*</code> objects have been inconsistently available in the predictor expression evaluation. However, due to how internal conversions might inadvertently change these names, they can not be relied on, and they are no longer being made available to the predictor expression. As a side effect, this change also speeds up some <code><a href="../reference/bru.html">bru()</a></code> runs by around a factor 2, since it avoids converting the <code>Spatial*</code> to a regular <code>data.frame</code> in time-sensitive core evaluation code.</p>
<p>If you need access to the raw coordinate values, use explicit calls to <code>sp::coordinates(.data.)</code> (e.g. for custom spatial covariate evaluation.). When possible, use the built-in covariate evaluation method, <code><a href="../reference/eval_spatial.html">eval_spatial()</a></code>, either implicitly with <code>comp(covariate, ...)</code> or explicitly, <code>comp(eval_spatial(covariate, where = .data.), ...)</code>, that handles <code>crs</code> information correctly. Also consider transitioning from <code>sp</code> to <code>sf</code> data storage, using <code>geometry</code> instead of raw coordinates.</p>
</li>
</ul></div>
<div class="section level3">
<h3 id="bug-and-dependency-updates-2-8-0">Bug and dependency updates<a class="anchor" aria-label="anchor" href="#bug-and-dependency-updates-2-8-0"></a></h3>
<ul><li>Remove <code>rgdal</code> and <code>maptools</code> dependencies <a href="https://github.com/inlabru-org/inlabru/issues/178" class="external-link">#178</a></li>
<li>Add <code><a href="../reference/bru_safe_sp.html">bru_safe_sp()</a></code> to check if <code>sp</code> can be used safely (checks <code>rgdal</code> availability and <code>sp</code> evolution status, optionally forcing use of <code>sf</code>) <a href="https://github.com/inlabru-org/inlabru/issues/178" class="external-link">#178</a></li>
<li>Remove PROJ4 support <a href="https://github.com/inlabru-org/inlabru/issues/178" class="external-link">#178</a></li>
<li>Change <code>rgl.*</code> functions to <code>*3d</code>. Thanks to Duncan Murdoch <a href="https://github.com/inlabru-org/inlabru/issues/181" class="external-link">#181</a></li>
<li>Speed up <code>ibm_jacobian.bru_mapper_harmonics</code> for large models</li>
<li>Add workarounds for inconsistent polygon orientation resulting from <code>sf::st_*</code> calls that don’t account for the <code>geos</code> canonical representation being CW, whereas the canonical Simple Features representation being CCW. See <a href="https://github.com/r-spatial/sf/issues/2096" class="external-link uri">https://github.com/r-spatial/sf/issues/2096</a>
</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.7.0" id="inlabru-270">inlabru 2.7.0<a class="anchor" aria-label="anchor" href="#inlabru-270"></a></h2><p class="text-muted">CRAN release: 2022-12-02</p>
<div class="section level3">
<h3 id="feature-overview-2-7-0">Feature overview<a class="anchor" aria-label="anchor" href="#feature-overview-2-7-0"></a></h3>
<ul><li>Added support for <code>sf</code> and <code>terra</code> inputs to most methods</li>
<li>Expanded geometry and mesh handling methods</li>
<li>Expanded <code><a href="../reference/bru_mapper.html">bru_mapper()</a></code> system</li>
<li>Added convergence diagnostics plot with <code><a href="../reference/bru_convergence_plot.html">bru_convergence_plot()</a></code>
</li>
</ul></div>
<div class="section level3">
<h3 id="feature-details-2-7-0">Feature details<a class="anchor" aria-label="anchor" href="#feature-details-2-7-0"></a></h3>
<ul><li><p>Allow <code>NA</code> input for default 1D mappers to generate effect zero, like in <code><a href="https://rdrr.io/pkg/INLA/man/inla.html" class="external-link">inla()</a></code>.</p></li>
<li><p>New and expanded methods <code><a href="https://inlabru-org.github.io/fmesher/reference/fm_crs.html" class="external-link">fm_crs()</a></code>, <code><a href="https://inlabru-org.github.io/fmesher/reference/fm_CRS_sp.html" class="external-link">fm_CRS()</a></code>, <code><a href="https://inlabru-org.github.io/fmesher/reference/fm_transform.html" class="external-link">fm_transform()</a></code>, <code><a href="https://inlabru-org.github.io/fmesher/reference/fm_crs_wkt.html" class="external-link">fm_ellipsoid_radius()</a></code>, and <code><a href="https://inlabru-org.github.io/fmesher/reference/fm_crs_wkt.html" class="external-link">fm_length_unit()</a></code> to further support <code>sf</code> objects. The <code><a href="https://inlabru-org.github.io/fmesher/reference/fm_crs.html" class="external-link">fm_crs()</a></code> extraction method also supports <code>terra</code> objects.</p></li>
<li><p><code><a href="../reference/bru_fill_missing.html">bru_fill_missing()</a></code> now supports <code>terra</code> <code>SpatRaster</code> data and and <code>sf</code> locations.</p></li>
<li><p>New experimental methods <code><a href="https://inlabru-org.github.io/fmesher/reference/fm_evaluate.html" class="external-link">fm_evaluator()</a></code> and <code><a href="https://inlabru-org.github.io/fmesher/reference/fm_evaluate.html" class="external-link">fm_evaluate()</a></code>, replacing the <code>INLA</code> <code>inla.mesh.projector</code> and <code>inla.mesh.project</code> methods.</p></li>
<li><p>Experimental integration support for sphere and globe meshes.</p></li>
<li><p>Allow <code>sf</code> input to <code>family="cp"</code> models.</p></li>
<li>
<p>Further <code><a href="../reference/bru_mapper.html">bru_mapper()</a></code> method updates;</p>
<ul><li>Deprecated <code>ibm_amatrix()</code> and <code><a href="https://rspatial.github.io/terra/reference/names.html" class="external-link">names()</a></code> methods, replaced by <code><a href="../reference/bru_mapper_generics.html">ibm_jacobian()</a></code> and <code><a href="../reference/bru_mapper_generics.html">ibm_names()</a></code>.</li>
<li>Introduced <code><a href="../reference/bru_mapper_pipe.html">bru_mapper_pipe()</a></code>, used to link mappers in sequence.</li>
<li>Introduced <code><a href="../reference/bru_mapper_aggregate.html">bru_mapper_aggregate()</a></code> and <code><a href="../reference/bru_mapper_logsumexp.html">bru_mapper_logsumexp()</a></code>, used for blockwise weighted sums and log-sum-exp mappings, <code>output[k] = sum(weights[block==k]*state[block==k])))</code> and <code>output[k] = log(sum(weights[block==k]*exp(state[block==k])))</code>, with optional weight normalisation within each block. Allows providing the weights as log-weights, and uses block-wise shifts to avoid potential overflow.</li>
<li>
<code>summary</code> methods for <code>bru_mapper</code> objects (<code><a href="../reference/bru_mapper_summary.html">summary.bru_mapper()</a></code>)</li>
<li>Removed <code>methods</code> argument from <code><a href="../reference/bru_mapper.html">bru_mapper_define()</a></code>. Implementations should register S3 methods instead.</li>
</ul></li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-2-7-0">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-2-7-0"></a></h3>
<ul><li>Remove unused <code>spatstat.core</code> dependency. Fixes <a href="https://github.com/inlabru-org/inlabru/issues/165" class="external-link">#165</a></li>
<li>Fixed issue with plain mapper evaluation in the <code><a href="../reference/bru_mapper_generics.html">ibm_eval.default()</a></code> and <code><a href="../reference/bru_mapper_collect.html">ibm_eval.bru_mapper_collect()</a></code> methods, where they would return zeros instead of the intended values. The main component evaluation and estimation code was not directly affected as that is based on the <code><a href="../reference/bru_mapper_multi.html">bru_mapper_multi()</a></code> class methods that rely on the Jacobians instead. The bug would therefore mainly have impacted the future, not yet supported nonlinear mapper extensions.</li>
<li>Fix for <code>eval_spatial.SpatRaster</code>; Work around inconsistent logic in <code>terra::extract(..., layer)</code> when <code>length(layer)==1</code> or <code>nrow(where)==1</code>. Fixes <a href="https://github.com/inlabru-org/inlabru/issues/169" class="external-link">#169</a></li>
<li>Add <code>indexed</code> logical option to <code><a href="../reference/bru_mapper_factor.html">bru_mapper_factor()</a></code>, to allow factor inputs to be mapped to index values, as needed for <code>group</code> and <code>replicate</code>. Fixes <a href="https://github.com/inlabru-org/inlabru/issues/174" class="external-link">#174</a></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.6.0" id="inlabru-260">inlabru 2.6.0<a class="anchor" aria-label="anchor" href="#inlabru-260"></a></h2><p class="text-muted">CRAN release: 2022-10-24</p>
<div class="section level3">
<h3 id="features-2-6-0">Features<a class="anchor" aria-label="anchor" href="#features-2-6-0"></a></h3>
<ul><li><p>Add <code>bru_get_mapper</code> generic, and associated methods for <code>inla.spde</code> and <code>inla.rgeneric</code> objects. This allows <code>inlabru</code> to automatically extract the appropriate <code>bru_mapper</code> object for each model component, and can be used as a hook by external packages implementing new INLA object classes.</p></li>
<li><p>Add a <code>weights</code> argument for <code><a href="../reference/bru_like.html">like()</a></code>, for likelihood-specific log-likelihood weights, passed on to the <code><a href="https://rdrr.io/pkg/INLA/man/inla.html" class="external-link">INLA::inla()</a></code> weights argument. Evaluated in the data context.</p></li>
<li><p>The <code>&lt;component&gt;_eval()</code> methods available in predictor expressions now handle optional scaling weights, like in ordinary component effect evaluation.</p></li>
<li><p>Add <code>terra</code> support for covariate inputs</p></li>
<li><p>The component <code>*_layer</code> arguments are now evaluated in the data context, to allow dynamic layer selection for spatial raster covariates. A new generic <code><a href="../reference/eval_spatial.html">eval_spatial()</a></code> provides support for grid/pixel based <code>Spatial*DataFrame</code> evaluation, and <code>SpatRaster</code>. Expanded support is in progress.</p></li>
<li><p>New vignettes on the <code>bru_mapper</code> system, <code>component</code> definitions, and <code>prediction_scores</code></p></li>
<li>
<p>General overhaul of the <code>bru_mapper</code> and linearised predictor system, to prepare for new features.</p>
<ul><li>Add <code>ibm_eval</code> generic for evaluating mappers for given states.</li>
<li>Add <code>bru_mapper_taylor</code>, used as an internal mapper for linearised mappers. This and <code>ibm_eval</code> is aimed at future support for nonlinear mappers. Associated new generic methods: <code>ibm_{is_linear,jacobian,linear}</code>.</li>
<li>New mapper implementations should use <code>ibm_jacobian</code> instead of <code>ibm_amatrix</code>. This allows defining a linearised mapper via <code>ibm_eval(input, state0) + ibm_jacobian(input, state0) %*% (state - state0)</code>.</li>
<li>New mapper class <code>bru_mapper_const</code>, which replaces <code>bru_mapper_offset</code>. <code>bru_mapper_offset</code> is now deprecated and will produce warnings.</li>
</ul></li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-2-6-0">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-2-6-0"></a></h3>
<ul><li>Enable both datum/ensemble container for ellipsoid information, to support <code>epsg:4326</code>. Fixes <a href="https://github.com/inlabru-org/inlabru/issues/154" class="external-link">#154</a></li>
<li>Make duplicated component names an error instead of a warning. Relates to <a href="https://github.com/inlabru-org/inlabru/issues/155" class="external-link">#155</a></li>
<li>Fix <code>Tsparse</code> assumptions in <code>row_kron</code> to prepare for Matrix <code>1.5-2</code>. Fixes <a href="https://github.com/inlabru-org/inlabru/issues/162" class="external-link">#162</a></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.5.3" id="inlabru-253">inlabru 2.5.3<a class="anchor" aria-label="anchor" href="#inlabru-253"></a></h2><p class="text-muted">CRAN release: 2022-09-05</p>
<div class="section level3">
<h3 id="features-2-5-3">Features<a class="anchor" aria-label="anchor" href="#features-2-5-3"></a></h3>
<ul><li>Add <code>bru_mapper_harmonics</code> mapper for <code>cos</code> and <code>sin</code> basis sets.</li>
<li>Allow <code><a href="https://rspatial.github.io/terra/reference/predict.html" class="external-link">predict()</a></code> input data to be be a list.</li>
<li>Allow arbitrary quantile summaries in <code><a href="https://rspatial.github.io/terra/reference/predict.html" class="external-link">predict()</a></code>
</li>
<li>Remove <code>cv</code>, <code>var</code>, <code>smin</code>, <code>smax</code> summaries from <code><a href="https://rspatial.github.io/terra/reference/predict.html" class="external-link">predict()</a></code>
</li>
<li>Add <code>mean.mc_std_err</code> and <code>sd.mc_std_err</code> output to <code><a href="https://rspatial.github.io/terra/reference/predict.html" class="external-link">predict()</a></code>
</li>
<li>Add <code>robins_subset</code> data set and associated variable coefficient web vignette</li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-2-5-3">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-2-5-3"></a></h3>
<ul><li>Propagate multi-likelihood A-matrix information instead of recomputing. Fixes iteration issue for bym2 and other <code>bru_mapper_collect</code> models.</li>
<li>Turn on predictor summaries during iterations to allow <code>inla.mode="classic"</code> to use proper line search.</li>
<li>Avoid deprecated Matrix (&gt;=1.4-2) class coercion methods</li>
<li>Work around for lack of full Matrix and ModelMatrix support for the <code>unique</code> method. Fixes <a href="https://github.com/inlabru-org/inlabru/issues/145" class="external-link">#145</a></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.5.2" id="inlabru-252">inlabru 2.5.2<a class="anchor" aria-label="anchor" href="#inlabru-252"></a></h2><p class="text-muted">CRAN release: 2022-03-30</p>
<ul><li>More robust package checks</li>
<li>More robust namespace and INLA availability checks</li>
<li>Add package vignette with links to the website examples</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.5.1" id="inlabru-251">inlabru 2.5.1<a class="anchor" aria-label="anchor" href="#inlabru-251"></a></h2>
<ul><li>Revert to R language features compatible with R 4.0.5</li>
<li>Use <code>strategy="gaussian"</code> during iterations.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.5.0" id="inlabru-250">inlabru 2.5.0<a class="anchor" aria-label="anchor" href="#inlabru-250"></a></h2><p class="text-muted">CRAN release: 2022-03-21</p>
<div class="section level3">
<h3 id="features-2-5-0">Features<a class="anchor" aria-label="anchor" href="#features-2-5-0"></a></h3>
<ul><li>Add <code><a href="../reference/bru.html">bru()</a></code> timing information in <code>$bru_timings</code> and <code>$bru_iinla$timings</code>
</li>
<li>Add <code>SpatialPolygonsDataFrame</code> support to <code><a href="../reference/gg.html">gg()</a></code> methods</li>
<li>Allow accessing <code>E</code> and <code>Ntrials</code> from <code>response_data</code> and <code>data</code> (further special arguments remain to be added)</li>
<li>
<code>deltaIC</code> improvements</li>
<li>New transformation helper tools <code>bru_{forward/inverse}_transformation()</code>
</li>
<li>Experimental support for matrix and formula component inputs. E.g. with <code>~ name(~ -1 + a + b + a:b, model = "fixed")</code>, covariate fixed effect interaction specifications can be made. For formula input, <code><a href="https://rdrr.io/pkg/MatrixModels/man/model.Matrix.html" class="external-link">MatrixModels::model.Matrix()</a></code> is called to construct matrix input that is then used as the A-matrix for fixed effects, one per column, added up to form the combined effect.</li>
<li>Documentation and examples improvements</li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-2-5-0">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-2-5-0"></a></h3>
<ul><li>Fix A-matrix construction for <code><a href="../reference/evaluate_model.html">evaluate_model()</a></code> for cases where the <code>inla_f</code> argument matters</li>
<li>More efficient and robust mesh integration code</li>
<li>Cleanup of environment handling for component lists</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.4.0" id="inlabru-240">inlabru 2.4.0<a class="anchor" aria-label="anchor" href="#inlabru-240"></a></h2><p class="text-muted">CRAN release: 2021-12-19</p>
<div class="section level3">
<h3 id="features-2-4-0">Features<a class="anchor" aria-label="anchor" href="#features-2-4-0"></a></h3>
<ul><li>Allow predictors to have different size than the input data. The <code>data</code> argument is now allowed to be a <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code>, and the new argument <code>response_data</code> allows separate specification of component inputs and response variables.</li>
<li>Add <code>bru_mapper_collect</code> class for handling sequential collections of mappers, including collections where all but the first mapper is hidden from the <code><a href="https://rdrr.io/pkg/INLA/man/f.html" class="external-link">INLA::f()</a></code> arguments <code>n</code> and <code>values</code>, as needed to support e.g. “bym2” models.</li>
<li>Add <code>control.family</code> as a direct argument to <code><a href="../reference/bru_like.html">like()</a></code>. Gives a warning if a <code>control.family</code> argument is supplied to the the <code>options</code> argument of <code><a href="../reference/bru.html">bru()</a></code>, but at least one likelihood has <code>control.family</code> information. (Issue <a href="https://github.com/inlabru-org/inlabru/issues/109" class="external-link">#109</a>)</li>
</ul></div>
<div class="section level3">
<h3 id="bugfixes-2-4-0">Bugfixes<a class="anchor" aria-label="anchor" href="#bugfixes-2-4-0"></a></h3>
<ul><li>Fix support for <code>SpatialPointsDataFrame</code> and <code>SpatialGridDataFrame</code> input to <code><a href="../reference/bru_fill_missing.html">bru_fill_missing()</a></code>
</li>
<li>Force explicit <code>model = "offset"</code> components instead of special options, to avoid interfering with the linearisation system (Issue <a href="https://github.com/inlabru-org/inlabru/issues/123" class="external-link">#123</a>)</li>
<li>Make the iterations more robust by resetting the internal INLA predictor states to initial value zero at each step</li>
</ul></div>
<div class="section level3">
<h3 id="miscellaneous-2-4-0">Miscellaneous<a class="anchor" aria-label="anchor" href="#miscellaneous-2-4-0"></a></h3>
<ul><li>Rename the option <code>bru_method$stop_at_max_rel_deviation</code> to <code>bru_method$rel_tol</code>. Automatic conversion to the new name, but a warning is given.</li>
<li>Add option <code>bru_method$max_step</code> to control the largest allowed line search scaling factor. See <code><a href="../reference/bru_options.html">?bru_options</a></code>
</li>
<li>New default option <code>bru_compress_cp</code> set to <code>TRUE</code> to compress the predictor expression for <code>family="cp"</code> to use a single element for the linear predictor sum.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.3.1" id="inlabru-231">inlabru 2.3.1<a class="anchor" aria-label="anchor" href="#inlabru-231"></a></h2><p class="text-muted">CRAN release: 2021-03-22</p>
<ul><li>Documentation and dependency updates for CRAN compatibility</li>
<li>See NEWS for version 2.3.0 for the major updates since version 2.1.13</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.3.0" id="inlabru-230">inlabru 2.3.0<a class="anchor" aria-label="anchor" href="#inlabru-230"></a></h2><p class="text-muted">CRAN release: 2021-03-16</p>
<div class="section level3">
<h3 id="breaking-changes-since-version-2-3-0">Breaking changes since version 2.1.13<a class="anchor" aria-label="anchor" href="#breaking-changes-since-version-2-3-0"></a></h3>
<ul><li>The model component argument <code>map</code> has been deprecated. Use <code>main</code> to specify the main component input, <code>~ elev(main = elevation, model = "rw2")</code>. Unlike the old <code>map</code> argument, <code>main</code> is the first one, so the shorter version <code>~ elev(elevation, model = "rw2")</code> also works.</li>
<li>Intercept-like components should now have explicit inputs, e.g. <code>~ Intercept(1)</code> to avoid accidental confusion with other variables.</li>
<li>The argument list for <code><a href="../reference/bru.html">bru()</a></code> has been simplified, so that all arguments except <code>components</code> and <code>options</code> must either be outputs from calls to <code><a href="../reference/bru_like.html">like()</a></code>, or arguments that can be sent to a single <code><a href="../reference/bru_like.html">like()</a></code> call.</li>
<li>The option setting system has been replaced with a more coherent system; see <code>?bru_options()</code> for details.</li>
<li>The <code>samplers</code> and <code>domain</code> system for <code>lgcp</code> models is now stricter, and requires explicit <code>domain</code> definitions for all the point process dimensions. Alternatively, user-defined integration schemes can be supplied via the <code>ips</code> argument.</li>
</ul></div>
<div class="section level3">
<h3 id="new-features-since-version-2-3-0">New features since version 2.1.13<a class="anchor" aria-label="anchor" href="#new-features-since-version-2-3-0"></a></h3>
<ul><li>The model component input arguments <code>main</code>, <code>group</code>, <code>replicate</code>, and <code>weights</code> can now take general R expressions using the data inputs. Special cases are detected: <code>SpatialPixels/GridDataFrame</code> objects are evaluated at spatial locations if the input data is a <code>SpatialPointsDataFrame</code> object. Functions are evaluated on the data object, e.g. <code>field(coordinates, model = spde)</code>
</li>
<li>The component arguments <code>mapper</code>, <code>group_mapper</code>, and <code>replicate_mapper</code> can be used for precise control of the mapping between inputs and latent variables. See <code><a href="../reference/bru_mapper.html">?bru_mapper</a></code> for more details. Mapper information is automatically extracted from <code><a href="https://rdrr.io/pkg/INLA/man/inla.spde2.pcmatern.html" class="external-link">INLA::inla.spde2.pcmatern()</a></code> model objects.</li>
<li>The R-INLA <code>weights</code> and <code>copy</code> features are now supported.</li>
<li>The predictor expressions can access the data object directly via <code>.data.</code>
</li>
<li>If data from several rows can affect the same output row, the <code>allow_combine = TRUE</code> argument must be supplied to <code><a href="../reference/bru_like.html">like()</a></code>
</li>
<li>The <code>include</code> and <code>exclude</code> arguments to <code><a href="../reference/bru_like.html">like()</a></code>, <code><a href="../reference/generate.html">generate()</a></code>, and <code><a href="https://rspatial.github.io/terra/reference/predict.html" class="external-link">predict()</a></code> can be used to specify which components are used for a given likelihood model or predictor expression. This can be used to prevent evaluation of components that are invalid for a likelihood or predictor.</li>
<li>Predictor expressions can access the latent state of a model component directly, by adding the suffix <code>_latent</code> to the component name, e.g. <code>name_latent</code>. For <code><a href="../reference/bru_like.html">like()</a></code>, this requires <code>allow_latent = TRUE</code> to activate the needed linearisation code for this.</li>
<li>Predictor expressions can evaluate component effects for arbitrary inputs by adding the suffix <code>_eval</code> to access special evaluator functions, e.g. <code>name_eval(1:10)</code>. This is useful for evaluating the 1D effect of spatial covariates. See the NEWS item for version 2.2.8 for further details.</li>
<li>The internal system for predictor linearisation and iterated INLA inference has been rewritten to be faster and more robust</li>
<li>See the NEWS entries for versions 2.1.14 to 2.2.8 for further details on new features and bug fixes</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.2.8" id="inlabru-228">inlabru 2.2.8<a class="anchor" aria-label="anchor" href="#inlabru-228"></a></h2>
<ul><li>
<p>Add <code>_eval</code> suffix feature for <code>generate.bru</code> and <code>predict.bru</code>, that provides a general evaluator function for each component, allowing evaluation of e.g. nonlinear effects of spatial covariates as a function of the covariate value instead of the by the spatial evaluator used in the component definition. For example, with <code>components = ~ covar(spatial_grid_df, model = "rw1")</code>, the prediction expression can have <code>~ covar_eval(covariate)</code>, where <code>covariate</code> is a data column in the prediction data object.</p>
<p>For components with <code>group</code> and <code>replicate</code> features, these also need to be provided to the <code>_eval</code> function, with <code>..._eval(..., group = ..., replicate = ...)</code></p>
<p>This feature is built on top of the <code>_latent</code> suffix feature, that gives direct access to the latent state variables of a component, so in order to use <code>_eval</code> in the model predictor itself, you must use <code>like(..., allow_latent = TRUE)</code> in the model definition.</p>
</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.2.7" id="inlabru-227">inlabru 2.2.7<a class="anchor" aria-label="anchor" href="#inlabru-227"></a></h2>
<ul><li>Add support for <code>ngroup</code> and <code>nrep</code> in component definitions</li>
<li>Updated <code>mexdolphin</code> and <code>mrsea</code> data sets, with consistent km units and improved mesh designs</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.2.6" id="inlabru-226">inlabru 2.2.6<a class="anchor" aria-label="anchor" href="#inlabru-226"></a></h2>
<ul><li>Add <code>predict(..., include)</code> discussion to distance sampling vignette, for handling non-spatial prediction in spatial models.</li>
<li>Fix bugs in <code>gg.SpatialLines</code>
</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.2.5" id="inlabru-225">inlabru 2.2.5<a class="anchor" aria-label="anchor" href="#inlabru-225"></a></h2>
<ul><li>Vignette corrections</li>
<li>Documentation improvements</li>
<li>Fix minor bug in <code>Spatial*</code> object handling and plotting</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.2.4" id="inlabru-224">inlabru 2.2.4<a class="anchor" aria-label="anchor" href="#inlabru-224"></a></h2>
<ul><li>Properly extract the joint latent conditional mode instead of the marginal latent conditional mode</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.2.2" id="inlabru-222">inlabru 2.2.2<a class="anchor" aria-label="anchor" href="#inlabru-222"></a></h2>
<ul><li>Fixed issue with <code><a href="https://rspatial.github.io/terra/reference/predict.html" class="external-link">predict()</a></code> logic for converting output to <code>Spatial*DataFrame</code>
</li>
<li>Use <code>control.mode=list(restart=FALSE)</code> in the final inla run for nonlinear models, to avoid an unnecessary optimisation.</li>
<li>Fix issues in <code><a href="../reference/inlabru-deprecated.html">pixels()</a></code> and <code><a href="../reference/bru_fill_missing.html">bru_fill_missing()</a></code> for <code>Spatial*DataFrame</code> objects with <code>ncol=0</code> data frame parts.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.2.1" id="inlabru-221">inlabru 2.2.1<a class="anchor" aria-label="anchor" href="#inlabru-221"></a></h2>
<ul><li>Fixed code regression bug for function input of covariates</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.2.0" id="inlabru-220">inlabru 2.2.0<a class="anchor" aria-label="anchor" href="#inlabru-220"></a></h2>
<ul><li>Support for the INLA “copy” feature, <code>comp2(input, copy = "comp1")</code>
</li>
<li>Allow component weights to be an unnamed parameter, <code>comp(input, weights, ...)</code>
</li>
<li>Direct access to the data objects in component inputs and predictor expressions, as <code>.data.</code>, allowing e.g. <code>covar(fun(.data.), ...)</code> for a complex covariate extractor method <code>fun()</code>
</li>
<li>Partial support for spherical manifold meshes</li>
<li>Uses INLA integration strategy “eb” for initial nonlinear iterations, and a specified integration strategy only for the final iteration, so that the computations are faster, and uses the conditional latent mode as linearisation point.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.1.15" id="inlabru-2115">inlabru 2.1.15<a class="anchor" aria-label="anchor" href="#inlabru-2115"></a></h2>
<ul><li>New options system</li>
<li>New faster linearisation method</li>
<li>New line search method to make the nonlinear inla iterations robust</li>
<li>Method for updating old stored estimation objects</li>
<li>System for supplying mappings between latent models and evaluated effects via <code>bru_mapper</code> objects</li>
<li>Improved factor support; Either as “contrast with the 1st level”, via the special <code>"factor_contrast"</code> model, or all levels with model <code>"factor_full"</code>. Further options planned (e.g. a simpler options to fix the precision parameter). The estimated coefficients appear as random effects in the <code><a href="https://rdrr.io/pkg/INLA/man/inla.html" class="external-link">inla()</a></code> output.</li>
<li>Interface restructuring to support new features while keeping most backwards compatibility. Change <code>map=</code> to <code>main=</code> or unnamed first argument; Since <code>main</code> is the first parameter, it doesn’t need to be a named argument.</li>
<li>Keep components with zero derivative in the linearisation</li>
<li>PROJ6 support</li>
<li>Add random seed option for posterior sampling</li>
<li>Add package unit testing</li>
<li>New backend code to make extended feature support easier</li>
<li>New <code>int.args</code> option to control spatial integration resolution, thanks to Martin Jullum (<code>martinju</code>)</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.1.13" id="inlabru-2113">inlabru 2.1.13<a class="anchor" aria-label="anchor" href="#inlabru-2113"></a></h2><p class="text-muted">CRAN release: 2020-02-16</p>
<ul><li>Fix CRAN complaint regarding documentation</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.1.12" id="inlabru-2112">inlabru 2.1.12<a class="anchor" aria-label="anchor" href="#inlabru-2112"></a></h2><p class="text-muted">CRAN release: 2019-06-24</p>
<ul><li>Workaround an integration points error for old (ca pre-2018) INLA versions</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.1.11" id="inlabru-2111-1">inlabru 2.1.11<a class="anchor" aria-label="anchor" href="#inlabru-2111-1"></a></h2>
<ul><li>Add CITATION file</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.1.10" id="inlabru-2110-1">inlabru 2.1.10<a class="anchor" aria-label="anchor" href="#inlabru-2110-1"></a></h2>
<ul><li>Fix internal sampling bug due to INLA changes</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.1.9" id="inlabru-219">inlabru 2.1.9<a class="anchor" aria-label="anchor" href="#inlabru-219"></a></h2><p class="text-muted">CRAN release: 2018-07-24</p>
<ul><li>Remove unused <code>VignetteBuilder</code> entry from <code>DESCRIPTION</code>
</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.1.8" id="inlabru-218">inlabru 2.1.8<a class="anchor" aria-label="anchor" href="#inlabru-218"></a></h2>
<ul><li>Update default options</li>
<li>Prevent <code>int.polygon</code> from integrating outside the mesh domain, and generally more robust integration scheme construction.</li>
<li>Fix <code><a href="../reference/bru.html">bru()</a></code> to <code><a href="../reference/bru_like.html">like()</a></code> parameter logic. (Thanks to Peter Vesk for bug example)</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.1.7" id="inlabru-217">inlabru 2.1.7<a class="anchor" aria-label="anchor" href="#inlabru-217"></a></h2>
<ul><li>Added a <code>NEWS.md</code> file to track changes to the package.</li>
<li>Added <code>inla</code> methods for <code><a href="https://rspatial.github.io/terra/reference/predict.html" class="external-link">predict()</a></code> and <code><a href="../reference/generate.html">generate()</a></code> that convert <code>inla</code> output into <code>bru</code> objects before calling the <code>bru</code> prediction and posterior sample generator.</li>
<li>Added protection for examples requiring optional packages</li>
<li>Fix <code>sample.lgcp</code> output formatting, extended CRS support, and more efficient sampling algorithm</li>
<li>Avoid dense matrices for effect mapping</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.1.4" id="inlabru-214">inlabru 2.1.4<a class="anchor" aria-label="anchor" href="#inlabru-214"></a></h2>
<ul><li>
<code><a href="../reference/iinla.html">iinla()</a></code> tracks convergence of both fixed and random effects</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.1.3" id="inlabru-213">inlabru 2.1.3<a class="anchor" aria-label="anchor" href="#inlabru-213"></a></h2><p class="text-muted">CRAN release: 2018-02-11</p>
<ul><li>Added matrix geom <code><a href="../reference/gg.matrix.html">gg.matrix()</a></code>
</li>
<li>Fixed CRAN test issues</li>
</ul></div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Finn Lindgren, Fabian E. Bachl.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

